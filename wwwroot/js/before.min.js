function materializeStuff(){let n=document.querySelectorAll("#absenceWindow, #overtimeWindow, #userWindow");$(n).addClass("no-autoinit");let t=document.querySelectorAll("#absenceWindow #dateFrom, #absenceWindow #dateTo, #overtimeWindow #date");$(t).addClass("no-autoinit");let i=document.querySelectorAll("#absenceWindow #timeFrom, #absenceWindow #timeTo");$(i).addClass("no-autoinit");materializeBuilder(M.Modal,n,{onCloseStart:n=>{n.querySelector("form").reset(),document.querySelectorAll(".field-validation-error").forEach(n=>{n.innerHTML=""})}});materializeBuilder(M.Datepicker,t,{format:"dd.mm.yyyy",firstDay:1,showDaysInNextAndPreviousMonths:!0,container:"body",i18n:{cancel:"Abbrechen",done:"Ok",months:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],weekdaysShort:["So","Mo","Di","Mi","Do","Fr","Sa"],weekdaysAbbrev:["S","M","D","M","D","F","S"]}});materializeBuilder(M.Timepicker,i,{container:"body",i18n:{cancel:"Abbrechen",done:"Ok"},twelveHour:!1});M.AutoInit()}function materializeBuilder(n,t,i){t.forEach(t=>{n.init(t,i)})}function absenceEdit(n){$.ajax({url:"/OwnTimes?handler=Absence&id="+n,success:n=>{let t=$("#absenceWindow input"),i=$.parseJSON(n);$(t[0]).val(i.AbsenceDateFrom);$(t[1]).val(i.AbsenceDateTo);$(t[2]).prop("checked",i.FullDay);$(t[3]).val(i.AbsenceTimeFrom);$(t[4]).val(i.AbsenceTimeTo);$(t[5]).prop("checked",i.Negative);let r=$(t).filter(`[value='${i.OtherReason}']`);r.length>0?$(r[0]).prop("checked",!0):($(t[11]).prop("checked",!0),$(t[12]).val(i.OtherReason));$(t[13]).prop("checked",i.Approved);$(t[14]).val(i.ID);$("#absenceWindow").modal("open")}})}function overtimeEdit(n){$("#overtimeWindow").modal("open");$.ajax({url:"/OwnTimes?handler=Overtime&id="+n,success:n=>{let i=$("#overtimeWindow input"),t=$.parseJSON(n);$(i[0]).val(t.Date);$(i[1]).val(t.Hours);$(i[2]).val(t.Customer);$("#overtimeWindow select").find(`option[value="${t.IdOvertimeDetail.toUpperCase()}"]`).prop("selected",!0);$("#overtimeWindow select").formSelect();$(i[4]).val(t.ID)}})}function absenceDelete(n){$.ajax({url:"/OwnTimes?handler=Absence&id="+n,method:"DELETE",beforeSend:n=>{n.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())},success:()=>{location.reload()}})}function overtimeDelete(n){$.ajax({url:"/OwnTimes?handler=Overtime&id="+n,method:"DELETE",beforeSend:n=>{n.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())},success:()=>{location.reload()}})}function writeUsersTable(n){$("#Users tbody tr").remove();$.ajax({url:"/Users?onlyActive="+n,success:n=>{let t=document.querySelector("#Users tbody");n.forEach(n=>{let i=t.insertRow(t.rows.length),r=0;i.insertCell(r).appendChild(document.createTextNode(n.username));i.insertCell(++r).appendChild(document.createTextNode(n.firstname));i.insertCell(++r).appendChild(document.createTextNode(n.lastname));i.insertCell(++r).appendChild(document.createTextNode(n.department));let u=$(`<div><button type="button" class="btn-small" onclick="userEdit ('${n.id}')">
<i class="material-icons">edit</i>
</button>
<button type="button" class="btn-small" onclick="userDelete('${n.id}')">
<i class="material-icons">delete</i>
</button></div>`);i.insertCell(++r).appendChild(u[0])})},error:()=>{alert("An error has occured")}})}function userEdit(n){$("#userWindow").modal("open");$.ajax({url:"/Users?id="+n,success:n=>{let i=$("#userWindow input"),t=$.parseJSON(n);$(i[0]).val(t.Username);$(i[2]).val(t.Firstname);$(i[3]).val(t.Lastname);$("#userWindow select:eq(0)").find(`option[value="${t.Department}"]`).prop("selected",!0);$("#userWindow select:eq(0)").formSelect();$(i[5]).val(t.Holidays);$(i[6]).prop("checked",t.Deactivated);$("#userWindow select:eq(1)").find(`option[value="${t.IdPermission.toUpperCase()}"]`).prop("selected",!0);$("#userWindow select:eq(1)").formSelect();$(i[8]).val(t.ID)}})}function userDelete(n){$.ajax({url:"/Users?id="+n,method:"DELETE",beforeSend:n=>{n.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())},success:()=>{location.reload()}})}$(document).ready(()=>{materializeStuff()});